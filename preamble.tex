\documentclass[12pt,a4paper]{moderncv}

\makeatletter
\def\input@path{{classes/}}
\makeatother

\usepackage{fontspec}
\usepackage{publications}
\usepackage[super]{nth}
\usepackage[scale=0.85]{geometry}
\usepackage{tikz}
\usepackage{enumitem}
\setlist{itemindent=2ex, itemsep=0em, topsep=0em, parsep=0em}

\defaultfontfeatures{Extension = .otf}% adds .otf to end of path when font loaded without ext parameter e.g. \newfontfamily{\FA}{FontAwesome} > \newfontfamily{\FA}{FontAwesome.otf}
\moderncvstyle{casual}
\moderncvcolor{blue}

% Change the width of the column with dates
\setlength{\hintscolumnwidth}{2cm}

\addbibresource{bibliography/publications.bib}

\name{Malcolm}{Ramsay}
\title{Computational Chemist}
\phone[mobile]{0466~224~898}
\email{malramsay64@gmail.com}
\homepage{malramsay.com}
\social[linkedin]{malramsay64}
\social[twitter]{malramsay64}
\social[github]{malramsay64}

\newcommand{\cvreference}[5]{%
    \textbf{#1}\newline%
    \ifthenelse{\equal{#2}{}}{}{#2\newline}%
    \ifthenelse{\equal{#3}{}}{}{#3\newline}%
    \ifthenelse{\equal{#4}{}}{}{\phonesymbol~#4\newline}%
    \ifthenelse{\equal{#5}{}}{}{\emailsymbol~\href{mailto:#5}{#5}\newline}%
}

\newcommand{\daterange}[2]{%
    \hfill #2\\
    |\hspace{2em}~\\
    \hfill #1}

\newcommand{\chref}[2]{\href{#1}{\color{color1}#2}}

\newcommand\cvskills[4]{%
  \cvcomputer{}{\skills{#1}{#2}}{}{\skills{#3}{#4}}
}


\newcommand\skills[2]{%
  #1 \hfill%
  \begin{tikzpicture}
    \draw[fill=color2,color2, opacity=0.3] (0, 0) rectangle (3, 0.3);
    \draw[fill=color1,color1] (0, 0) rectangle (#2 * 3, 0.3);
  \end{tikzpicture}
}
